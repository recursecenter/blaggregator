{% load static from staticfiles %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <style>
         body {
             padding: 60px 0px;
         }
         .rc-logo {
             opacity: 0.66;
             box-shadow:  1px 1px 0 #000000, 2px 1px 0 #000000, 3px 1px 0 #000000, 4px 1px 0 #000000, 5px 1px 0 #000000, 6px 1px 0 #000000, 7px 1px 0 #000000, 8px 1px 0 #000000, 9px 1px 0 #000000, 10px 1px 0 #000000, 11px 1px 0 #000000, 12px 1px 0 #000000, 1px 2px 0 #000000, 2px 2px 0 #ffffff, 3px 2px 0 #ffffff, 4px 2px 0 #ffffff, 5px 2px 0 #ffffff, 6px 2px 0 #ffffff, 7px 2px 0 #ffffff, 8px 2px 0 #ffffff, 9px 2px 0 #ffffff, 10px 2px 0 #ffffff, 11px 2px 0 #ffffff, 12px 2px 0 #000000, 1px 3px 0 #000000, 2px 3px 0 #ffffff, 3px 3px 0 #000000, 4px 3px 0 #000000, 5px 3px 0 #000000, 6px 3px 0 #000000, 7px 3px 0 #000000, 8px 3px 0 #000000, 9px 3px 0 #000000, 10px 3px 0 #000000, 11px 3px 0 #ffffff, 12px 3px 0 #000000, 1px 4px 0 #000000, 2px 4px 0 #ffffff, 3px 4px 0 #8bc34a, 4px 4px 0 #000000, 5px 4px 0 #8bc34a, 6px 4px 0 #000000, 7px 4px 0 #8bc34a, 8px 4px 0 #000000, 9px 4px 0 #000000, 10px 4px 0 #000000, 11px 4px 0 #ffffff, 12px 4px 0 #000000, 1px 5px 0 #000000, 2px 5px 0 #ffffff, 3px 5px 0 #000000, 4px 5px 0 #000000, 5px 5px 0 #000000, 6px 5px 0 #000000, 7px 5px 0 #000000, 8px 5px 0 #000000, 9px 5px 0 #000000, 10px 5px 0 #000000, 11px 5px 0 #ffffff, 12px 5px 0 #000000, 1px 6px 0 #000000, 2px 6px 0 #ffffff, 3px 6px 0 #000000, 4px 6px 0 #8bc34a, 5px 6px 0 #8bc34a, 6px 6px 0 #000000, 7px 6px 0 #8bc34a, 8px 6px 0 #8bc34a, 9px 6px 0 #000000, 10px 6px 0 #000000, 11px 6px 0 #ffffff, 12px 6px 0 #000000, 1px 7px 0 #000000, 2px 7px 0 #ffffff, 3px 7px 0 #000000, 4px 7px 0 #000000, 5px 7px 0 #000000, 6px 7px 0 #000000, 7px 7px 0 #000000, 8px 7px 0 #000000, 9px 7px 0 #000000, 10px 7px 0 #000000, 11px 7px 0 #ffffff, 12px 7px 0 #000000, 1px 8px 0 #000000, 2px 8px 0 #ffffff, 3px 8px 0 #000000, 4px 8px 0 #000000, 5px 8px 0 #000000, 6px 8px 0 #000000, 7px 8px 0 #000000, 8px 8px 0 #000000, 9px 8px 0 #000000, 10px 8px 0 #000000, 11px 8px 0 #ffffff, 12px 8px 0 #000000, 1px 9px 0 #000000, 2px 9px 0 #ffffff, 3px 9px 0 #ffffff, 4px 9px 0 #ffffff, 5px 9px 0 #ffffff, 6px 9px 0 #ffffff, 7px 9px 0 #ffffff, 8px 9px 0 #ffffff, 9px 9px 0 #ffffff, 10px 9px 0 #ffffff, 11px 9px 0 #ffffff, 12px 9px 0 #000000, 1px 10px 0 #000000, 2px 10px 0 #000000, 3px 10px 0 #000000, 4px 10px 0 #000000, 5px 10px 0 #000000, 6px 10px 0 #000000, 7px 10px 0 #000000, 8px 10px 0 #000000, 9px 10px 0 #000000, 10px 10px 0 #000000, 11px 10px 0 #000000, 12px 10px 0 #000000, 5px 11px 0 #000000, 6px 11px 0 #000000, 7px 11px 0 #000000, 8px 11px 0 #000000, 2px 12px 0 #000000, 3px 12px 0 #000000, 4px 12px 0 #000000, 5px 12px 0 #000000, 6px 12px 0 #000000, 7px 12px 0 #000000, 8px 12px 0 #000000, 9px 12px 0 #000000, 10px 12px 0 #000000, 11px 12px 0 #000000, 1px 13px 0 #000000, 2px 13px 0 #000000, 3px 13px 0 #000000, 4px 13px 0 #ffffff, 5px 13px 0 #000000, 6px 13px 0 #ffffff, 7px 13px 0 #000000, 8px 13px 0 #ffffff, 9px 13px 0 #000000, 10px 13px 0 #ffffff, 11px 13px 0 #000000, 12px 13px 0 #000000, 1px 14px 0 #000000, 2px 14px 0 #000000, 3px 14px 0 #ffffff, 4px 14px 0 #000000, 5px 14px 0 #ffffff, 6px 14px 0 #000000, 7px 14px 0 #ffffff, 8px 14px 0 #000000, 9px 14px 0 #ffffff, 10px 14px 0 #000000, 11px 14px 0 #000000, 12px 14px 0 #000000, 1px 15px 0 #000000, 2px 15px 0 #000000, 3px 15px 0 #000000, 4px 15px 0 #000000, 5px 15px 0 #000000, 6px 15px 0 #000000, 7px 15px 0 #000000, 8px 15px 0 #000000, 9px 15px 0 #000000, 10px 15px 0 #000000, 11px 15px 0 #000000, 12px 15px 0 #000000;
             height: 1px;
             width: 1px;
         }
        </style>
        <title>{% block pagetitle %}{% endblock %}</title>
        <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
             (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

         ga('create', 'UA-45572414-1', 'blaggregator.us');
         ga('send', 'pageview');
        </script>
    </head>

    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
            <div class="container">
                <a class="navbar-brand" href="/new">Blaggregator<span class="text-muted">.RecurseCenter</span></a>
                <ul class="navbar-nav">
                    {% if user.is_authenticated %}
                        {% url 'profile' user.id as profile_url %}
                        {% if not primary_blog_set and profile_url != request.get_full_path%}
                            <li class="nav-item">
                                <a href="{{profile_url}}">
                                    <button class="btn mr-auto btn-primary" type="button submit">Add Your Blog</button>
                                </a>
                            </li>
                        {% endif %}
                        <li class="nav-item dropdown">
                            <a id="navbarDropdown" role="button" href="#" class="btn btn-outline-secondary nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Welcome, {{ user.first_name }}!
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="/profile/{{user.id}}">Profile</a>
                                <a class="dropdown-item" href="/logout">Log out</a>
                            </div>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </nav>

        <div class="container">

            <div id="title">
                <h2>{% block title %}{% endblock %}</h2>
            </div>

            <div>
                {% block content %}{% endblock %}
            </div>

        </div>

        <footer class="navbar fixed-bottom navbar-light bg-light" role="navigation">
            <div class="container">
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/recursecenter/blaggregator/issues">Contribute</a>
                    </li>
                    {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'feed' %}?token={{user.hacker.token}}" target="_blank">
                                <img class="feed-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Rss-feed.svg/24px-Rss-feed.svg.png"/>
                            </a>
                        </li>
                    {% endif %}
                </ul>
                {% if user.is_authenticated %}
                    <form class="form-inline" role="search" method="GET" action="/search">
                        <input class="form-control mr-sm-2" name="q" type="search" placeholder="Search" aria-label="Search">
                        <button type="submit" class="btn btn-outline-success">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </form>
                {% endif %}
            </div>
        </footer>


        {% block scripts %}
            <script src="//code.jquery.com/jquery.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js" integrity="sha384-feJI7QwhOS+hwpX2zkaeJQjeiwlhOP+SdQDqhgvvo1DsjtiSQByFdThsxO669S2D" crossorigin="anonymous"></script>
            <script src="{% static "js/update_images.js" %}"></script>
        {% endblock %}

    </body>
</html>
